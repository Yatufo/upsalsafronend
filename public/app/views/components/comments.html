<div>

  <div ng-class="current.isEditing ? 'input-group' : '' " ng-if="current.isEditable()">
    <textarea class="form-control" ng-keydown="onKeyDown(current, $event)" ng-model="current.comment" placeholder="What do you think about this place?" rows="{{current.textRows}}" style="resize:none"></textarea>
    <span class="input-group-addon btn btn-primary" ng-click="save(current)" ng-if="current.isEditing">Post</span>
  </div>

  <a ng-if="commentable.comments.length" ng-click="toogleView()"><small>{{expanded ? 'hide' :'show'}} {{commentable.comments.length}} comment(s)</small></a>
  <div class="media" ng-if="expanded" ng-repeat="comment in commentable.comments">
    <div class="media-left media-top">
      <a ng-href="{{comment.userInfo.link}}" target="_blank">
        <img alt="" class="avatar" ng-src="{{comment.userInfo.picture}}"/>
      </a>
    </div>
    <div class="media-body">
      <div ng-class="comment.isEditing ? 'input-group' : '' ">
        <div class="" ng-if="!comment.isEditing" ng-bind-html="comment.formattedComment"></div>
        <textarea class="form-control" ng-keydown="onKeyDown(comment, $event)" ng-model="comment.comment" ng-if="comment.isEditing" rows="{{comment.textRows}}" style="resize:none"></textarea>
        <span class="input-group-addon btn btn-primary" ng-click="save(comment)" ng-if="comment.isEditing">Save</span>
      </div>
      <small>{{comment.formattedDate}}</small>
      <a ng-click="edit(comment)" ng-if="comment.isEditable() && !comment.isEditing">edit</a>
    </div>
  </div>

</div>
